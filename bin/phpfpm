#!/bin/bash

# Helper script to run commands in the phpfpm container
# Automatically uses the correct compose files based on environment

# Get the container name from docker compose
CONTAINER=$(docker compose ps --format "{{.Names}}" | grep "phpfpm")

# Check if container exists
if [ -z "$CONTAINER" ]; then
    echo "Error: phpfpm container is not running" >&2
    exit 1
fi

# Detect if we're running in a non-interactive context
# Check if stdin is a terminal
if [ -t 0 ]; then
    # Interactive mode - normal exec with -it
    docker exec -it "$CONTAINER" "$@"
else
    # Non-interactive mode - no TTY
    docker exec "$CONTAINER" "$@"
fi
